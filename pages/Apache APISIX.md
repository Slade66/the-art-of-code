- **Apache APISIX 是什么？**
	- 把 APISIX 想象成一个交通枢纽。客户端（如浏览器或 App）发出的所有请求都会先到达这个枢纽，然后 APISIX 根据预设规则，决定将请求转发到哪个或哪些后端服务进行处理。
	- Apache APISIX 由 API7.ai 创建，于 2019 年开源，并捐赠给 Apache 软件基金会。
	- Apache APISIX 是一个开源、动态、实时且可扩展的高性能云原生 API 网关。
- **Apache APISIX 的端口：**
	- `9180`：Admin API 端口，用于管理和配置 APISIX。
	- `9080`：监听并处理客户端的 HTTP 请求。
	- `9443`：监听并处理客户端的 HTTPS 请求。
- **Apache APISIX 和 etcd 的关系：**
	- etcd 是一个高可用的分布式键值存储系统。在 APISIX 架构中，它用作存放所有配置信息的数据库。你创建的所有规则——包括路由、上游、插件以及 SSL 证书——都保存在 etcd 中。
	- APISIX 的核心工作是处理真实业务流量，即接收客户端请求，并根据规则进行转发、处理和响应。APISIX 节点本身是无状态的，这意味着它不在本地存储任何配置。如果某个节点宕机，换一个新节点上线，只要能连接同一个 etcd 集群，就能立即获取全部配置并正常工作。
- **Apache APISIX 的配置加载与动态同步机制：**
	- **节点初始化与配置拉取：**APISIX 服务节点启动时，会首先连接到 etcd 集群，并从中拉取全量配置（包括所有路由和插件规则），加载到自身内存中，使节点能够立即了解现有配置。
	- **建立长连接监听：**初始配置加载完成后，APISIX 会对 etcd 中存储配置的关键目录建立一个持久的长连接监听，以持续关注配置变化。
	- **配置写入 etcd：**当管理员通过 Admin API 发送创建或修改配置的请求时，APISIX 不会直接修改内存，而是将新的配置写入 etcd 集群。
	- **实时变更通知与更新：**一旦 etcd 中的数据发生变化，所有监听该目录的 APISIX 节点会在毫秒级内收到变更通知，并立即更新内存中的规则。
	- **实现动态同步：**整个过程无需重启 APISIX 服务，配置变更会通过上述机制实时且动态地同步到所有网关节点，确保配置的快速一致性。
- [[Route]]
- [[Upstream]]
-