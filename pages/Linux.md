-
- DPKG vs. APT
  heading:: true
  collapsed:: true
	- APT 和 DPKG 是 Debian 及其衍生发行版（如 Ubuntu）中用于管理软件包的两个核心工具，它们之间的主要区别在于功能层次和处理依赖关系的能力。
	- **DPKG** 是底层的、直接的工具，负责安装、删除单个软件包文件 (`.deb`)。
	- **APT** 是更高层的、智能的工具，它依赖 DPKG，但负责处理复杂的**依赖关系**、**软件源**和**版本控制**。
	- **DPKG（Debian Package）：**
		- DPKG 本身无法去互联网上下载软件，它只是安装、卸载本地 `.deb` 文件，维护已安装软件的数据库。
		- 不处理依赖关系，如果您使用 `dpkg -i package.deb` 安装一个包，而这个包缺少依赖，DPKG 会报错并停止，不会自动为您下载和安装依赖项。
		- 只有当您手里已经有了一个 `.deb` 文件，并且确定其所有依赖都已满足时，您才会直接使用 `dpkg -i` 命令。
		- **作用：**
			- **软件包的安装与卸载：**
				- 它处理的是后缀为 `.deb` 的软件包文件。
				- **安装：**它将 `.deb` 文件解压，并把其中的文件（程序、库、文档等）复制到文件系统的正确位置。
					- `dpkg -i package.deb`
				- **卸载：**它从系统中删除一个软件包的文件。
					- `dpkg -r package`
			- **软件包状态查询与维护：**
				- DPKG 维护着一个包含系统所有已知软件包的数据库。这是 APT 和所有其他高层工具查询软件包信息的唯一来源。
				- **查询：**查看某个包是否已安装、版本号、状态等。
					- `dpkg -l`（列出所有包）
	- **APT（Advanced Package Tool）：**
		- 自动解决依赖关系、管理软件源和进行版本控制。
		- 当您使用 `apt install package` 时，APT 会查询软件源，自动下载所需的所有依赖包，然后按正确的顺序调用 DPKG 来完成实际的安装。
		- APT 使得 Linux 用户无需关心复杂的依赖处理，是日常使用中最主要的工具。DPKG 则是幕后执行实际安装软件的“工人”。APT 是对 DPKG 的包装和增强。
		- **当您输入 `sudo apt install nginx` 时：**
			- **APT** 负责去互联网上的软件源（例如 `http://archive.ubuntu.com/`）查找 `nginx` 及其所有依赖包（如 `libpcre3`）。
			- **APT** 将所有必需的 `.deb` 文件下载到您的系统。
			- **APT** 按照正确的顺序（先安装依赖，再安装主程序）调用 **DPKG** 来执行底层的安装操作。
			- **DPKG** 负责将 `.deb` 文件中的内容解压并放置到文件系统中。
- [[tail]]
-