-
- 有什么用？
	- 插件是 APISIX 的核心功能扩展。
	- 插件可以在请求的生命周期中执行各种操作，比如认证、限流、日志记录、安全检查等等。
	- APISIX 的强大之处就在于它的插件机制，你可以像搭积木一样自由组合这些功能。
	- **作用:** 插件决定了“如何处理请求”。
- [[Apache APISIX/Plugins/AI]]
- #### `limit-req`（请求速率限制）
	- **作用**：在单位时间内（如秒或分钟）精确控制可以通过的请求数量，使用“漏桶”算法平滑处理突发流量，防止后端服务被瞬间流量打垮。
	- **应用场景**：最常见的接口防刷场景。例如，为防止短信接口被恶意调用，可以限制每个手机号或IP对“发送验证码”接口的调用频率为`每分钟1次`
- #### `limit-conn`（并发连接数限制）
	- **作用**：限制在同一时刻流向后端服务的总活跃（并发）连接数。当达到设定的阈值时，后续的新连接将被拒绝。
	- **应用场景**：保护那些无法承受高并发的后端服务。例如，某个微服务依赖一个老旧的数据库，其连接池很小，使用此插件可以确保同时处理的请求数在其能力范围内，防止服务崩溃。
- #### `limit-count`（请求总数限制）
	- **作用**：在指定的时间窗口内，限制一个客户端能够发起的请求总数。它像一个精确的计数器，达到上限后即拒绝服务。
	- **应用场景**：实现API的调用配额（Quota）管理。例如，为API服务的不同等级用户设置调用限额：免费用户`每天可调用1000次`，VIP用户`每月可调用100,000次`。
- #### `proxy-cache`（代理缓存）
	- **作用**：将后端服务的响应结果缓存在API网关层。对于后续相同的请求，可以直接从缓存中快速返回，而无需再次请求后端服务。
	- **应用场景**：提升高频“读”接口的性能。例如，一个电商网站的商品信息或新闻门户的文章列表，这些数据在短时间内不会变化，非常适合开启缓存，能极大降低延迟、减少后端负载。
- #### `request-validation`（请求校验）
	- **作用**：在请求到达后端服务之前，根据预设的规则对请求参数（如Header、URL参数、请求体）进行合法性校验。
	- **应用场景**：在网关层统一处理基础的参数校验。例如，强制要求用户注册接口的请求体中 `password` 字段必须是8位以上，`email` 字段必须符合邮箱格式，无效请求会被网关直接拦截。
- #### `proxy-mirror`（流量镜像）
	- **作用**：将线上的真实请求流量完整地复制一份，异步地发送到另一个镜像服务上。这个过程不影响主请求的正常处理和响应。
	- **应用场景**：线上服务的无风险测试（也称影子测试）。例如，你用Go重构了一个旧的Java服务，可以将线上流量镜像到新的Go服务上，观察其性能和行为是否符合预期，而不用担心影响真实用户。
- #### `api-breaker`（API 熔断器）
	- **作用**：实现了熔断器模式，当监测到后端服务出现高比例错误或超时时，会自动“熔断”。在熔断期间，网关会直接快速失败，避免无效请求拖垮上游服务。
	- **应用场景**：提高微服务架构的稳定性和容错能力，防止“雪崩效应”。例如，支付服务故障时，熔断器会快速拒绝所有发往支付的请求，从而保护订单服务等依赖方不被阻塞和拖垮。
- #### `traffic-split`（流量切分）
	- **作用**：根据配置的权重，将客户端的请求流量按比例分发到多个不同的后端服务版本中。
	- **应用场景**：实现灰度发布（金丝雀发布）和 A/B测试。例如，新版本v2上线后，可以先将`5%`的流量切换到v2，其余`95%`的流量保留在稳定的v1版本，验证新版本无误后再逐步放开所有流量。
- #### `request-id`（请求 ID）
	- **作用**：为每一个进入网关的请求生成一个全局唯一的ID，并通过请求头（如 `X-Request-ID`）将其传递给所有下游的微服务。
	- **应用场景**：实现分布式链路追踪。当系统出现问题时，可以通过这个唯一的ID在日志系统中快速串联起一个请求经过的所有服务日志，从而精准定位问题根源。
- #### `proxy-control` （代理控制）
	- **作用**：允许客户端通过发送特定的请求头来动态地、临时地改变本次请求的代理行为，例如改变要转发的后端服务地址。
	- **应用场景**：主要用于灵活的测试和调试。例如，测试人员可以在请求头中加入 `X-APISIX-Upstream-Addr: 192.168.10.1:8080`，将自己的请求临时路由到指定的测试服务器上，而无需修改任何网关配置。
- #### `client-control`（客户端控制）
	- **作用**：在网关层控制客户端请求的某些行为，目前核心功能是限制客户端请求体（Request Body）的大小。
	- **应用场景**：增强网关的安全性，防止恶意的大请求攻击。例如，为文件上传接口设置请求体大小上限为`20MB`，任何超过此大小的上传请求都会被网关直接拒绝，从而保护后端服务。
- #### `workflow`（工作流）
	- **作用**：提供强大的插件编排能力，允许你自定义多个插件的执行顺序，并根据条件判断来决定是否执行或跳过某些插件。
	- **应用场景**：实现复杂的、非线性的处理逻辑。例如，你可以定义一个工作流：先执行身份认证插件，`如果`认证为VIP用户，`则跳过`限流插件；`如果`为普通用户，`则继续执行`限流插件。
-