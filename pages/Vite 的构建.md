- **为什么要构建？**
	- 简单来说，构建就是解决开发环境和生产环境之间的差异。
	- **开发环境：**我们追求的是开发效率。我们使用最新的 JavaScript（如 ES6+）、TypeScript、CSS 预处理器（如 Sass），并把代码拆分成多个模块（components, modules），以便于团队协作和代码复用。这些代码虽然方便我们开发，但浏览器无法直接识别和高效加载。
	- **生产环境：**我们追求的是网站的性能。网站需要尽可能快地加载，并且在各种浏览器上都能稳定运行。这就要求代码体积尽可能小，文件数量尽可能少，并且能充分利用浏览器缓存。
	- 前端构建工具（如 Vite、Webpack 等）就是连接这两个世界的桥梁。它就像一个高效的工厂，把我们零散、高可读性的“原材料”代码，加工成紧凑、高性能的“成品”代码。
- **构建命令：**`npm run build`
- **构建流程：**
	- 当你运行 `npm run build` 命令时，它会执行 `package.json` 文件中 `scripts` 部分定义的 `"build"` 脚本，该脚本通常对应 `vite build` 命令。
	- 执行 `vite build` 后，Vite 会完成以下工作：
		- **加载配置文件：** 读取并解析项目根目录下的 `vite.config.js`（或 `.ts`）文件，以获取构建配置。
		- **打包代码：** 它会分析项目中所有 `.js`、`.css`、`.ts` 等文件的依赖关系，然后将它们“捆绑”成一个或少数几个文件。这样做能有效减少浏览器的网络请求次数，从而提升加载速度。
		  id:: 68c266ac-2694-4f5b-8c4c-8bb5644bf4a4
		- **代码转译：**我们写的最新 ES6+ 语法或 TypeScript 代码，一些老旧的浏览器可能不支持。构建工具会把这些新语法转换成所有浏览器都兼容的旧版本 JavaScript。
		- **代码优化：**
			- **代码压缩：**移除代码中的空格、注释，并缩短变量名，以减小文件体积。
			- **摇树优化：**自动移除代码中未被使用的部分代码，从而有效减小文件体积。
			- **代码分割：**智能地将代码拆分为多个小的 `chunk` 文件。这允许浏览器按需加载，而不是一次性加载一个巨大的文件，从而加快首屏渲染速度。
		- **生成最终文件：**最终，所有经过优化的静态文件都会被输出到项目根目录的 `dist` 文件夹中。这个 `dist` 目录包含了可以直接部署到任何静态文件服务器上的最终产物。
- **构建产物分析：**
	- 构建完成后，`dist` 目录通常会包含以下文件和目录：
		- ```text
		  dist/
		  ├── assets/                  # 静态资源 (JS, CSS, 图片等)
		  │   ├── index-xxxxxx.js      # 入口 JS 文件 (经过代码分割和哈希处理)
		  │   ├── vendor-yyyyyyy.js    # 如果配置了 manualChunks，这里是第三方库文件
		  │   └── index-zzzzzz.css     # 抽离出的 CSS 文件
		  ├── index.html               # 入口 HTML 文件 (已自动更新 JS 和 CSS 引用路径)
		  └── favicon.ico              # 网站图标
		  ```
	- **文件哈希：**
		- 你可能会注意到，一些文件名中包含一串随机字符，这被称为内容哈希。
		- **它的主要作用是实现长期缓存：**构建工具会根据文件内容生成一个唯一的哈希值，并将其加到文件名中。只有当文件内容发生变化时，哈希值才会改变，文件名随之更新。这样一来，浏览器就能安全地永久缓存这些静态资源。下次用户访问时，如果文件名没有改变，浏览器会直接从缓存中读取，从而大幅提升加载速度。
	- `index.html` 是部署应用的入口文件。Vite 已自动将打包好的 JS 和 CSS 文件通过 `<script>` 和 `<link>` 标签注入到其中。
- **构建流程：**
	- **执行构建：**在项目根目录下运行 `npm run build` 命令。
	- **检查构建产物：**检查项目根目录下生成的 `dist` 文件夹，确认文件结构是否符合预期。
	- **部署：**将 `dist` 文件夹中的所有内容上传到你的静态服务器的指定目录。
-