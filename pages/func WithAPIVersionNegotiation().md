- **作用：**
	- 该函数启用客户端的 API 版本自动协商功能。
	- 客户端在首次请求时会自动与 Docker Daemon 协商所使用的 API 版本，后续请求将复用该结果，而不会再次进行协商。
- **方法签名：**
	- ```go
	  func WithAPIVersionNegotiation() Opt
	  ```
- **参数：**
	- 无
- **返回值：**
	- 返回一个 [[Docker/Docker Engine Go SDK/type Opt func(*Client)]] 类型的函数。
- **核心执行流程：**
	- **设置协商标志：** 这个返回的匿名函数被调用时，它会将传入的 `Client` 结构体中的布尔字段 `c.negotiateVersion` 设置为 `true`。
	- **触发首次协商：** 当客户端的任何 API 方法（如 `ContainerList`）在内部调用 `cli.checkVersion(ctx)` 时，会检查 `c.negotiateVersion` 是否为 `true`。
	- **执行协商过程：** 如果为 `true`，客户端会向 Docker 守护进程发送一个 Ping 请求。
	- **确定最终版本：** 客户端读取 Ping 响应中守护进程报告的最高 API 版本，并将其与客户端自身支持的版本进行比较，将客户端的版本 (`c.version`) 降级或调整到双方都兼容的版本。
	- **停止重复协商：** 协商成功后，客户端会将内部的 `c.negotiated` 标志设为 `true`，确保后续请求不会重复执行协商过程。
- **为什么要协商？**
	- 自动协商的目的是向下兼容。它会确保客户端使用的版本不高于守护进程支持的最高版本。如果守护进程的版本比客户端支持的最新版本旧，客户端会自动降级到守护进程的版本。
	- Docker Engine API 会随着时间演进和更新，这意味着客户端库（如 Go 客户端）可能支持的 API 版本，与运行中的 Docker 守护进程实际提供的版本可能不同。
	- 协商机制解决了这种版本不匹配的问题：它允许客户端在发送实际的 API 请求之前，通过第一次连接（通常是 Ping 请求）自动检测守护进程支持的最高 API 版本，然后客户端将自身的 API 版本降级（或适配）到双方都能理解和接受的最高共同版本。
	- 这样可以确保客户端发出的请求是守护进程能够正确处理的，从而避免因版本差异导致的通信失败或错误。
- **注意：**
	- 如果你使用 `client.FromEnv` 创建客户端，它会默认读取环境变量 `DOCKER_API_VERSION`。当该变量被手动设置时，其值会覆盖自动协商功能，客户端将使用指定的 API 版本。只有在 `DOCKER_API_VERSION` 未设置或为空，并且同时启用了 `WithAPIVersionNegotiation` 选项时，API 版本自动协商才会生效。
	-